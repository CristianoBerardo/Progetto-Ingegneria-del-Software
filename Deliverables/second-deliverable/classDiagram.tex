
\newgeometry{
    margin=1.5cm,
    noheadfoot, nomarginpar,
    footskip=1.25em,
}

\begin{landscape}
\begin{figure}[!ht]
    \centering
    \includegraphics[trim= 0cm 0cm 0cm 0cm, clip, width=1\linewidth]{Deliverables/second-deliverable/img/ClassDiagram.pdf}
    \caption{Class Diagram}
\end{figure}

\end{landscape}

\newpage

\section{Diagramma delle classi}
\subsection{Classi di supporto}

\begin{itemize}
    \item \textbf{Date}: La classe contiene gli attributi per descrivere i giorni dell'anno.
    
    \item \textbf{Status}: Enumerazione con i possibili stati per un ordine.
\end{itemize}

\subsection{Autenticazione e profili utente}
\begin{itemize}
    \item \textbf{Authentication Service}:
Classe che si occupa principalmente della gestione del login, della registrazione e del recupero della password dell’utente appoggiandosi ad un servizio esterno.
\begin{table}[!htbp]
    \centering
    \begin{tabularx}{\textwidth}{| c | X |}
    \hline
         \textbf{Operazione} & \textbf{Descrizione}\\
         \hline
         register() & legge i valori immessi in input dall’utente e lo registra tramite il servizio esterno di gestione account. Al termine della registrazione l’utente sarà automaticamente autenticato, quindi il valore dell’attributo role passerà da Guest al ruolo dell'User appena registrato.\\
         \hline
         login() & verifica che i valori immessi (in particolare email e password) corrispondano con quelli effettivamente registrati dall’utente tramite servizio esterno. In caso di successo, imposterà il valore dell’attributo role al ruolo dell'User che si è autenticato.\\
         \hline
         recoverPassword() & legge l’email immessa dall’utente e richiede al servizio esterno di avviare la procedura per recuperare la password.\\
         \hline
    \end{tabularx}
\end{table}

\item \textbf{User}: Classe astratta che rappresenta un utente del sistema. Contiene gli attributi comuni a tutti gli utenti, come email, password, e stato di autenticazione. È la base da cui derivano le classi specifiche per ogni tipo di utente (Guest, Customer, Producer, Administrator). 
\begin{table}[!htbp] 
    \centering 
    \begin{tabularx}{\textwidth}{| c | X |} 
    \hline 
    \textbf{Operazione} & \textbf{Descrizione}\\
    \hline 
    login() & Verifica che le credenziali immessi (email e password) siano corrette e autenticano l'utente, impostando l'attributo \texttt{authenticated} a \texttt{True}.\\ 
    \hline 
    logout() & Disconnette l'utente, impostando l'attributo \texttt{authenticated} a \texttt{False}.\\
    \hline 
    updateProfile() & Permette all'utente di aggiornare i propri dati, come l'email o la password, e salva le modifiche nel sistema.\\
    \hline 
    \end{tabularx} 
\end{table} 

\item \textbf{Guest}:
Classe che rappresenta un utente non autenticato, che ha accesso limitato al sistema. I guest possono solo consultare il catalogo dei prodotti, ma non possono fare ordini o interagire con le funzionalità più avanzate del sistema.

\item \textbf{Customer}:
Classe che rappresenta un cliente registrato nel sistema. Il cliente può fare ordini, visualizzare gli ordini precedenti, lasciare recensioni sui produttori e gestire i propri dati di pagamento.
\begin{table}[!htbp]
    \centering
    \begin{tabularx}{\textwidth}{| c | X |}
    \hline
         \textbf{Operazione} & \textbf{Descrizione} \\
         \hline
         placeOrder() & Consente al cliente di effettuare un ordine di uno o più prodotti. L'ordine viene registrato nel sistema e associato al cliente. \\
         \hline
         viewOrders() & Permette al cliente di visualizzare una lista dei propri ordini passati, con informazioni relative ai prodotti ordinati e allo stato dell'ordine. \\
         \hline
         leaveReview() & Permette al cliente di lasciare una recensione ad un produttore presso il quale ha concluso un acquisto. La recensione include una valutazione e un commento. \\
         \hline
         deleteReview() & Permette al cliente di eliminare una recensione precedentemente lasciata per un produttore. \\
         \hline
         setCard() & Consente al cliente di impostare o aggiornare i propri dati di pagamento, associando una carta di credito al proprio account. \\
         \hline
    \end{tabularx}
\end{table}

\item \textbf{Administrator}:
Classe che rappresenta un amministratore del sistema. L'amministratore ha privilegi di gestione per l'intero sistema, inclusi la gestione degli utenti, delle recensioni e la pubblicazione di notizie.
\begin{table}[!htbp]
    \centering
    \begin{tabularx}{\textwidth}{| c | X |}
    \hline
         \textbf{Operazione} & \textbf{Descrizione} \\
         \hline
         deleteUser() & Consente all'amministratore di eliminare un utente dal sistema, sia esso un cliente, un produttore o un guest. \\
         \hline
         deleteReview() & Permette all'amministratore di eliminare una recensione lasciata da un cliente su un prodotto. \\
         \hline
         publishNews() & Consente all'amministratore di pubblicare notizie o aggiornamenti nel sistema, visibili a tutti gli utenti. \\
         \hline
    \end{tabularx}
\end{table}

\item \textbf{Producer}:
Classe che rappresenta un produttore (o azienda agricola) nel sistema. Il produttore è responsabile della gestione del proprio inventario di prodotti, della visualizzazione e gestione degli ordini, e della generazione di report.
\begin{table}[!htbp]
    \centering
    \begin{tabularx}{\textwidth}{| c | X |}
    \hline
         \textbf{Operazione} & \textbf{Descrizione} \\
         \hline
         addProduct() & Consente al produttore di aggiungere un nuovo prodotto al proprio inventario. Il prodotto viene registrato nel sistema con tutte le sue informazioni. \\
         \hline
         removeProduct() & Permette al produttore di rimuovere un prodotto dal proprio inventario. Il prodotto non sarà più disponibile per gli utenti. \\
         \hline
         setProductQuantity() & Consente al produttore di aggiornare la quantità disponibile di un prodotto nell'inventario, in base alla disponibilità reale. \\
         \hline
         viewOrders() & Permette al produttore di visualizzare gli ordini ricevuti, con i dettagli relativi ai prodotti ordinati e allo stato dell'ordine. \\
         \hline
         confirmOrder() & Consente al produttore di confermare un ordine ricevuto, procedendo con la preparazione e spedizione dei prodotti. \\
         \hline
         cancelOrder() & Permette al produttore di annullare un ordine, per esempio se un prodotto non è disponibile o per altri motivi. \\
         \hline
         generateReport() & Consente al produttore di generare report sulle vendite, sugli ordini e sull'inventario, per monitorare le attività dell'azienda. \\
         \hline
    \end{tabularx}
\end{table}

\end{itemize}

\subsection{Gestione ordine}
\begin{itemize}
    \item \textbf{Product}:
Classe che rappresenta un prodotto nel sistema. Ogni prodotto ha un identificatore, un nome, una descrizione, un prezzo, una quantità disponibile e un produttore associato. I prodotti sono gestiti dai produttori attraverso varie operazioni.
\begin{table}[!htbp]
    \centering
    \begin{tabularx}{\textwidth}{| c | X |}
    \hline
         \textbf{Operazione} & \textbf{Descrizione} \\
         \hline
         updateAvailability() & Consente al produttore di aggiornare la quantità disponibile del prodotto, in base alla disponibilità reale. \\
         \hline
         modifyDescription() & Permette al produttore di modificare la descrizione di un prodotto, ad esempio per aggiornare le informazioni o aggiungere dettagli. \\
         \hline
    \end{tabularx}
\end{table}

\item \textbf{Order}:
Classe che rappresenta un ordine effettuato da un cliente nel sistema. Ogni ordine contiene un elenco di prodotti, lo stato dell'ordine, il metodo di pagamento, e le date relative all'ordine e al ritiro. L'ordine è associato a un cliente e può essere confermato, pagato e consegnato.
\begin{table}[!htbp]
    \centering
    \begin{tabularx}{\textwidth}{| c | X |}
    \hline
         \textbf{Operazione} & \textbf{Descrizione} \\
         \hline
         confirmOrder() & Consente al cliente di confermare l'ordine, finalizzando la selezione dei prodotti e passando allo stato di "in attesa di pagamento". \\
         \hline
         payOrder() & Permette al cliente di effettuare il pagamento dell'ordine, che può essere online o sul posto, a seconda del metodo di pagamento selezionato. \\
         \hline
         deliverOrder() & Consente al produttore di segnare l'ordine come consegnato, completando così il processo di acquisto. \\
         \hline
    \end{tabularx}
\end{table}

\item \textbf{Review}:
Classe che rappresenta una recensione lasciata da un cliente su un prodotto o servizio fornito da un produttore. Ogni recensione contiene un contenuto testuale, una valutazione numerica, e i riferimenti al cliente e al produttore. Le recensioni possono essere rimosse, se necessario.
\begin{table}[!htbp]
    \centering
    \begin{tabularx}{\textwidth}{| c | X |}
    \hline
         \textbf{Operazione} & \textbf{Descrizione} \\
         \hline
         deleteReview() & Permette al cliente di eliminare una recensione precedentemente lasciata, o al produttore di rimuoverla, se necessario. \\
         \hline
    \end{tabularx}
\end{table}

\end{itemize}


\subsection{Altre classi e servizi}

\begin{itemize}
    \item \textbf{News}:
Classe che rappresenta una notizia pubblicata nel sistema. Ogni notizia contiene un titolo, un contenuto, una data di pubblicazione e una data di scadenza. Le notizie possono essere modificate, in particolare per quanto riguarda la data di scadenza.
\begin{table}[!htbp]
    \centering
    \begin{tabularx}{\textwidth}{| c | X |}
    \hline
         \textbf{Operazione} & \textbf{Descrizione} \\
         \hline
         modifyExpireDate() & Consente all'amministratore di modificare la data di scadenza di una notizia, prolungando o accorciando la sua visibilità nel sistema. \\
         \hline
    \end{tabularx}
\end{table}

\item \textbf{PaymentService}:
Classe che gestisce l'elaborazione dei pagamenti per gli ordini. Si occupa di processare i pagamenti e di verificare lo stato delle transazioni. È utilizzato dal sistema per completare il pagamento degli ordini effettuati dai clienti.
\begin{table}[!htbp]
    \centering
    \begin{tabularx}{\textwidth}{| c | X |}
    \hline
         \textbf{Operazione} & \textbf{Descrizione} \\
         \hline
         processPayment() & Gestisce il pagamento di un ordine, interagendo con il sistema di pagamento esterno per completare la transazione. \\
         \hline
         checkPaymentStatus() & Verifica lo stato di un pagamento effettuato, restituendo informazioni sulla riuscita o meno della transazione. \\
         \hline
    \end{tabularx}
\end{table}

\item \textbf{NotificationService}:
Classe che gestisce l'invio delle notifiche agli utenti del sistema. Si occupa di inviare conferme degli ordini, promemoria per il ritiro e notifiche ai produttori riguardo agli ordini ricevuti o altre attività rilevanti.
\begin{table}[!htbp]
    \centering
    \begin{tabularx}{\textwidth}{| c | X |}
    \hline
         \textbf{Operazione} & \textbf{Descrizione} \\
         \hline
         sendOrderConfirmation() & Invia una notifica di conferma al cliente dopo che un ordine è stato effettuato, includendo i dettagli dell'ordine. \\
         \hline
         remindPickup() & Invia un promemoria al cliente riguardo la data di ritiro dell'ordine, per assicurarsi che il cliente non dimentichi di ritirarlo. \\
         \hline
         notifyProducer() & Invia una notifica al produttore riguardo un nuovo ordine ricevuto, inclusi i dettagli sui prodotti ordinati e la data di ritiro. \\
         \hline
    \end{tabularx}
\end{table}

\item \textbf{Database}:
Classe che gestisce le operazioni di salvataggio e recupero dei dati dal database. Si occupa di memorizzare prodotti, ordini, recensioni e notizie, garantendo che le informazioni siano persistenti e accessibili per l'elaborazione e la visualizzazione nel sistema.
\begin{table}[!htbp]
    \centering
    \begin{tabularx}{\textwidth}{| c | X |}
    \hline
         \textbf{Operazione} & \textbf{Descrizione} \\
         \hline
         saveProduct() & Salva un prodotto nel database, registrando tutte le informazioni relative al prodotto (nome, descrizione, prezzo, ecc.). \\
         \hline
         saveOrder() & Salva un ordine nel database, inclusi i dettagli del cliente, i prodotti ordinati, e lo stato dell'ordine. \\
         \hline
         saveReview() & Salva una recensione lasciata da un cliente, inclusi il contenuto e la valutazione, nel database. \\
         \hline
         saveNews() & Salva una notizia nel database, registrando il titolo, il contenuto, e le date di pubblicazione e scadenza. \\
         \hline
    \end{tabularx}
\end{table}
\end{itemize}